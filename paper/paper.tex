\documentclass[fontsize=11pt]{scrartcl}
\usepackage[english]{babel}
\usepackage[utf8]{inputenc}				% special symbols
\usepackage{fancyhdr}					% headers and footers
\usepackage{verbatim}					% for comments
\usepackage{graphicx}					% images
\usepackage[font=footnotesize]{caption}	% smaller image label
\usepackage[usenames,dvipsnames,svgnames,table]{xcolor} 					% highlighting
\usepackage{hyperref}				    % for links (text or internet)
\usepackage{amsmath}	    			% maths
\usepackage{relsize}

\usepackage[hyperref=true,style=authoryear,backend=biber]{biblatex}
\usepackage{filecontents}
\usepackage{setspace}
\usepackage{fancyhdr}
\usepackage[ruled,vlined]{algorithm2e}

\usepackage{listings}

\lstset{language=C++,
    basicstyle=\footnotesize\ttfamily,
    keywordstyle=\bfseries\color{blue},%
    showstringspaces=false,
    breaklines=true,%
    morekeywords={include, printf},
	backgroundcolor=\color{lightgray},
    identifierstyle=\color{black},%
    stringstyle=\color{DarkOrchid},
    commentstyle=\color{Green},%
    numbers=left,
    numberstyle={\tiny \color{black}},
    numbersep=9pt,
    emph=[1]{for,if,else,switch,case,while,return},emphstyle=[1]\color{red},
	stepnumber=5,
	tabsize=2
}



%\linespread{2}

% \pagestyle{headings}

\addbibresource{bibliography.bib}


\title{Real Time Fluid Simulation \\ \smaller using Smoothed-Particle Hydrodynamics and OpenGL}

\subtitle{Computer Graphics CS 488}

\author{Michael Berg \\ Matthias Untergassmair}


\pagestyle{fancy}
\rhead{\thepage}




\begin{document}


\maketitle

\abstract{
	This paper explores the field of Smooth Particle Hydrodynamics (SPH), starting at its 
beginnings as a tool to simulate astrophysical phenomena and following its evolution and 
implementation as a way to simulate fluids such as water. We will then give a brief 
mathematical background and ensuing algorithm of our SPH simulation followed by a detailed 
explanation of it.
}

\clearpage

\section{Introduction}
%
\hspace{6 pt} Smoothed Particle Hydrodynamics (SPH) successfully simulates fluids by breaking up a 
fluid body into individual parts, or particles. These particles together form a particle 
system that simulates various gravitational forces. Fluid movement is simulated in the 
system by moving particles around any particle moved, simulating a rippling, wave effect.
\\
\hspace*{6 pt} The ripple effect is created by first calculating which particles are surrounding 
a particle moved, and these surrounding particles are moved according to the movement 
of the first particle moved. But SPH wasn't originally intended to simulate liquid 
substances, but astrophysical phenomena.
%

\section{History}
%
\hspace{6 pt} Given all the different applications for Smoothed Particle Hydrodynamics (SPH),
it was first used to simulate interstellar phenomena. Conceived in 1977 by Gingold and 
Monaghan was an improvement to the Standard Finite Difference Method, which until their 
breakthrough, was the method to use to simulate astrophysical phenomena. They improved 
on this method by making "use of Lagrangian description of fluid flow which automatically 
focuses attention on fluid elements" \cite{sphastrophysics}. In this implementation, particles 
"move according to the Newtonian equations with forces due to the pressure gradient and 
other body forces: gravity, rotation and magnetic" \cite{sphastrophysics}.
\\
\hspace*{6 pt} 
%

\section{Mathematical Background}
%
\begin{align}
	a_i^n = \frac{F_i^n}{m_i} = \dots
	\label{math:acceleration}
\end{align}

\section{The Algorithm}
%
In the following, we denote the position for the particle $i$ at time $t$ as $x_i^t$, its velocity as $v_i^t$ and its acceleration as $a_i^t$.
We omit the vector notation ($\boldsymbol{x},\boldsymbol{v},\boldsymbol{a}$) for these quantities, since the following equations are valid for the vectors as well as for each component individually.
\par\medskip
%
As suggested in \cite{generalizedwallboundary}, we use the \emph{Velocity-Verlet} time stepping scheme as follows:
%
\begin{algorithm}
	\caption{Single Timestep with Velocity Verlet Algorithm}
	\KwData{$x_i^t$, $v_i^{t - \frac{\Delta t}{2}}$, $a_i^t$, $\Delta t$}
	\KwResult{$x_i^{t + \Delta t}$, $v_i^{t + \frac{\Delta t}{2}}$, $a_i^{t + \Delta t}$}	
	$v_i^{t+\frac{\Delta t}{2}} = v_i^{t - \frac{\Delta t}{2}} + \Delta t a_i^t$ \;
	$x_i^{t+\Delta t} = x_i^t + \Delta t v_i^{t+\frac{\Delta t}{2}}$ \;	
	$a_i^{t + \Delta t} = a_i^{t + \Delta t} (x_i^{t + \Delta t}, m_i)$ from equation \ref{math:acceleration} \;
\end{algorithm}




\clearpage


\section*{Appendix: Code}

\lstinputlisting[caption=sphModel.hpp]{../sphModel.hpp}
\lstinputlisting[caption=sphModel.cpp]{../sphModel.cpp}
\lstinputlisting[caption=Simulation.cpp]{../Simulation.cpp}
\lstinputlisting[caption=simulation.vsh]{../resources/simulation.vsh}
\lstinputlisting[caption=simulation.fsh]{../resources/simulation.fsh}


\clearpage
\nocite{*}
\printbibliography


\end{document}
